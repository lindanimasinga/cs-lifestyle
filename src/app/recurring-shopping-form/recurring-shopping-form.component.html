<!-- Shopping List Form -->
  <form (ngSubmit)="onSubmit()" #shoppingListForm="ngForm" class="shopping-list-form">
    <div class="form-group">
      <label for="name">Shopping List Name</label>
      <input
        type="text"
        id="name"
        name="name"
        class="form-control"
        [(ngModel)]="shoppingList.name"
        required
        placeholder="e.g., Weekly Groceries"
      />
    </div>

    <div class="form-group">
      <label for="schedule">Schedule</label>
      <select
        id="schedule"
        name="schedule"
        class="form-control"
        [(ngModel)]="shoppingList.schedule"
        required
      >
        <option value="" disabled>Select schedule</option>
        <option value="ONCE_OFF">Once-Off</option>
        <option value="DAILY">Daily</option>
        <option value="WEEKLY">Weekly</option>
        <option value="MONTHLY">Monthly</option>
        <option value="YEARLY">Yearly</option>
      </select>
    </div>

        <div class="form-group">
      <label for="schedule">Shop Name</label>
      <select
        id="shopName"
        name="shopName"
        class="form-control"
        [(ngModel)]="shopId"
        required
      >
        <option value="" disabled>Select shop</option>
        <option *ngFor="let shop of shops" [value]="shop.id" [selected]="shop.id === shopId">{{ shop.name }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="startDate">Start Date</label>
      <input
        type="date"
        id="startDate"
        name="startDate"
        class="form-control"
        [(ngModel)]="startDate"
        required
      />
    </div>

    <div class="form-group">
      <label for="endDate">End Date</label>
      <input
        type="date"
        id="endDate"
        name="endDate"
        class="form-control"
        [(ngModel)]="endDate"
      />
    </div>

    <div class="form-group" hidden>
      <label for="userIds">User IDs (optional)</label>
      <input
        type="text"
        id="userIds"
        name="userIds"
        class="form-control"
        [(ngModel)]="userIds"
        placeholder="Comma-separated user IDs"
      />
    </div>

        <div class="shopping-item-section mt-5">
        <h5>Add Shopping Item</h5>
    
        <div class="form-group">
          <label for="itemName">Item Name</label>
          <div class="input-group select-item">
            <input
              id="stockSelection d-flex align-items-center"
              autocomplete="off"
              type="text"
              id="itemName"
              name="itemName"
              class="form-control"
              [(ngModel)]="newShoppingItem"
              placeholder="Search item name e.g., Milk"
              required
            />
          </div>
        
          <!--  DropDown Starts  -->
          <div class="" [hidden]="!showSearches">
            <div class="search">
              <div *ngFor="let stock of filteredStock;" tappable (click)="selectedStock(stock)" class="row search-result border border-bottom-0">
                <img class="stockImage col-3" [src]="stock.imageUrl"> 
                <div class="col-9">{{stock.name}}</div>
              </div>     
            </div>
            <p class="search" *ngIf="filteredStock && filteredStock.length <= 0 && !isSearching">No items found</p>
          </div>
          <!--  DropDown Ends  -->
        </div>
    </div>

    <div class="checkout-item d-flex justify-content-between align-items-center mt-5">
      <h5 class="">My Shopping List</h5>
      <button type="submit" class="btn bg-dark shadow-sm">Save</button>
      <button (click)="checkout()" class="btn bg-dark shadow-sm">Checkout</button>
    </div>

    <div class="shopping-item-section mt-4">
      <div *ngFor="let shoppingItem of shoppingList.items; let i = index; trackBy: trackByQuantity" tappable class="row p-1 shoppingItems align-items-center">
        <img class="stockImage col-3" [src]="shoppingItem.imageUrl">
        <div class="col-5">{{shoppingItem.name}}</div>
        <div class="col-4 d-flex align-items-center">
          <button type="button" class="btn btn-sm btn-light" (click)="decreaseQuantity(i)">-</button>
          <span class="mx-2">x{{shoppingItem.quantity}}</span>
          <button type="button" class="btn btn-sm btn-light" (click)="increaseQuantity(i)">+</button>
        </div>
      </div>
    </div>
  </form>